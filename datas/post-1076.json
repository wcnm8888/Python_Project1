{
    "link": "https://bbs.nga.cn/read.php?tid=40112548",
    "title": "手游卡池的qps曲线是什么样的？",
    "post_time": "2024-05-09 17:02",
    "uid": "62205629",
    "content": "如题，手游卡池里会有明显qps的波动吗？比如大量玩家集中在开服时抽卡导致的极高并发这样？",
    "replies": [
        {
            "mid": "992969",
            "mtime": "2024-05-10 12:05",
            "mcontent": "极高并发是肯定的，但是不至于爆或者说谁爆谁菜逼手游抽卡的计算量才多少比较简单的方法，事先先准备一个很长的随机序列，用户抽卡直接从里面出栈就好了，快得很"
        },
        {
            "mid": "8777681",
            "mtime": "2024-05-11 13:13",
            "mcontent": "无冲突域的有什么可怕的"
        },
        {
            "mid": "63362839",
            "mtime": "2024-05-12 04:10",
            "mcontent": "王者抽水晶是怎么设计的"
        },
        {
            "mid": "61097535",
            "mtime": "2024-05-15 16:11",
            "mcontent": "手游卡池在技术上可以没有池，本质是规则决定概率先查用户当前卡池状态(多少抽，是小保底还是大保底)然后得到概率用随机数就能得到结果了并发风险主要在用户卡池状态查询和修改，一般是读写密集型的的场景，肯定用分布式缓存。个人感觉用个一致性哈希就行了。  网游那种全服限量10把的武器会复杂很多，需要用户请求相同的池子，里面还需要加入一些卡池策略去诱导氪金。"
        }
    ]
}