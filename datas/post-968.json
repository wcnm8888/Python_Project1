{
    "link": "https://bbs.nga.cn/read.php?tid=40467971",
    "title": "有懂modbus rtu协议的大佬吗",
    "post_time": "2024-06-08 12:56",
    "uid": "62587260",
    "content": "想咨询大佬们问题，之前同事写的一份通信的代码，里面只有读的功能，如果要自己加写数据的功能，有没有什么思路啊。",
    "replies": [
        {
            "mid": "62587260",
            "mtime": "2024-06-08 13:02",
            "mcontent": "顶一下"
        },
        {
            "mid": "65764524",
            "mtime": "2024-06-08 13:57",
            "mcontent": "先看下协议吧，实际很简单，读的功能码03 写的是06和16，解析功能码的时候加个分支就行"
        },
        {
            "mid": "1603096",
            "mtime": "2024-06-08 15:30",
            "mcontent": "rtu 是标准协议，也就是说一般情况下，大家用的命令格式一样的如楼上，一般 03是读，06、16是写，前后放需要拼凑的内容，一般为：从机地址 + 读命令 + 寄存器地址 + 读寄存器个数 + CRC校验码从机地址 + 写命令 + 寄存器地址 + 写寄存器个数(比如2) + 对应长度的内容(前面是2这里就要写两个字节的内容) + CRC校验码读命令返回的内容，和写命令写入时候差不多，你读了两个寄存器，它就会返回一串，包括两个寄存器的所有字节内容看着复杂，实际上现在相关库很成熟，你只需要会把数据拼凑进去就行了，像CRC和帧封装都不用你管的至于有界面，有按钮交互这种的，你需要的是把读写功能封装成可复用的东西，比如函数或者类，然后和按钮绑定事件，事件名就叫“按下按钮”。这样当按钮触发了按下的操作时，你之前准备好的函数就会被调用(即回调)"
        },
        {
            "mid": "2858747",
            "mtime": "2024-06-08 16:15",
            "mcontent": "你用C++是改PC端程序？设备是PLC、MCU还是触摸屏控制？"
        },
        {
            "mid": "62587260",
            "mtime": "2024-06-08 16:59",
            "mcontent": "嗯，是改pc端程序，控制触摸屏用的，有一份代码是只能读的，我要加个写，我不太会。。。"
        },
        {
            "mid": "65528044",
            "mtime": "2024-06-08 22:32",
            "mcontent": "libmodbus看一下就行了"
        },
        {
            "mid": "42138251",
            "mtime": "2024-06-09 02:59",
            "mcontent": "不知道c++有没有库，不过用C#的NMODBUS4库，一天你界面和功能都写完了，还能准时下班。"
        },
        {
            "mid": "6733551",
            "mtime": "2024-06-09 21:42",
            "mcontent": "这个是标准协议啦，你翻一下是不是用的标准协议还是有改过的，写入的是06和10还是啥，忘了，找找现成的"
        },
        {
            "mid": "19022326",
            "mtime": "2024-06-10 23:23",
            "mcontent": "看下这个 [https:://www.simplymodbus.ca/index.html 此网页不属于本网站，不保证其安全性  继续访问       取消 https://www.simplymodbus.ca/index.html https://www.simplymodbus.ca/index.html]结果拿这个对比验证下"
        }
    ]
}