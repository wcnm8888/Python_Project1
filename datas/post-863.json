{
    "link": "https://bbs.nga.cn/read.php?tid=40658349",
    "title": "[求助] 用WordPress搭的小型公司官网，之前被篡改植入了暗链，现在把几个异常的php删掉后，日志里显示还是有其他IP频繁来访问，请问大佬们可以怎么解决呢？",
    "post_time": "2024-06-25 14:32",
    "uid": "36235667",
    "content": "上周派出所同志联系我，说公司官网被篡改植入了暗链，让去派出所领了个表回来填写盖章再返回去，然后尽快把官网整改。",
    "replies": [
        {
            "mid": "26377507",
            "mtime": "2024-06-25 14:57",
            "mcontent": "你可以过滤出访问最多的异常ip，将这些ip通过防火墙drop或者在nginx中drop如果只是文件被修改，可以将整个目录或者文件锁住：sudo chattr +i File.txt  或者通过-i来解锁"
        },
        {
            "mid": "151107",
            "mtime": "2024-06-25 15:05",
            "mcontent": "最简单傻瓜的办法，下个宝塔面板， 把网站迁移到宝塔，然后在网站设置里面，开启网站防篡改，要是网站不对国外访问的，直接屏蔽外网IP。防火墙开启，只开放常用的端口访问，云服务器的系统漏洞能补的都补下。1核2G的云服务器性能不怎么好，PHP开启opcache组件，网页搞静态缓存。"
        },
        {
            "mid": "2504017",
            "mtime": "2024-06-25 16:18",
            "mcontent": "wp有生成全站完全html化的插件在确定把所有黑灰产相关内容清理掉之后直接全站生成html然后把php和mysql停掉就行"
        },
        {
            "mid": "36235667",
            "mtime": "2024-06-26 14:55",
            "mcontent": "光是25号这天的log里就有三万多条访问失败的记录，涉及900多个IP(失败的原因大概是我把异常文件清理后访问404了)次数最多的IP是1000多次，还有几个连续IP都访问了400-500次，其他还有很多同网段下的连续近百个IP访问了1-2次这些记录应该都是异常访问吧，大概是防护不到位的机器被抓为肉鸡了？就是不知道我把这些IP都给拦截以后，攻击方会不会换一批肉鸡或者干脆伪造IP再来，太浪费人时间了主要是感觉我们这个公司官网没什么攻击价值啊……单纯拿来练手？"
        },
        {
            "mid": "36235667",
            "mtime": "2024-06-26 14:56",
            "mcontent": "我此前试过一些办法，包括你提到的静态和php插件，当时好像是正常了一段时间然后宝塔的防篡改现在好像是要收费了"
        },
        {
            "mid": "36235667",
            "mtime": "2024-06-26 14:57",
            "mcontent": "好的，我会试试，感谢建议"
        },
        {
            "mid": "63850727",
            "mtime": "2024-07-08 17:16",
            "mcontent": "公网上的网站就是这样的，有大量的僵尸网络肉鸡在24h扫描，这边日常监测每天光封攻击的都要封好多IP，更别说那些扫描的了"
        }
    ]
}