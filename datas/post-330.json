{
    "link": "https://bbs.nga.cn/read.php?tid=42532433",
    "title": "[C/C++] 请问我这种需求应该如何在线程间传递消息？",
    "post_time": "2024-11-22 19:21",
    "uid": "731907",
    "content": "需求：",
    "replies": [
        {
            "mid": "3260753",
            "mtime": "2024-11-22 23:05",
            "mcontent": "这哪里需要什么消息队列，你真的理解各种编程模型/设计模式么。。observer模式不就够了"
        },
        {
            "mid": "731907",
            "mtime": "2024-11-23 00:37",
            "mcontent": "我的理解：“当需要前进时(玩家控制发送消息)，队长给队员发消息，命令前进多少米。”，这个可以用观察者模式。队员是观察者，队长是被观察者。队长状态发生变化，队员收到通知，同步更新状态。但是接下里的情景“当某个队员需要救援时，队员给队长发求救消息，队长再给其他队员发救援消息，一起去救该队员”无法理解了，再另外建立观察者实例，队员是被观察者，队长是观察者？然后还要筛选通知谁？"
        },
        {
            "mid": "49140",
            "mtime": "2024-11-23 10:51",
            "mcontent": "要现成用Erlang"
        },
        {
            "mid": "731907",
            "mtime": "2024-11-23 12:49",
            "mcontent": ""
        },
        {
            "mid": "66211563",
            "mtime": "2024-11-23 13:20",
            "mcontent": "私信你了。"
        },
        {
            "mid": "43377109",
            "mtime": "2024-11-23 14:20",
            "mcontent": "C#里我知道用什么，有好几种现成的类型可以用，一对一一对多"
        },
        {
            "mid": "290046",
            "mtime": "2024-11-25 16:31",
            "mcontent": "观察者个毛，反而把关系搞复杂了，生产-消费队列模型没有问题，每个人都给一个消费队列，要给谁发消息就往他的队列里塞就完了"
        },
        {
            "mid": "42816275",
            "mtime": "2024-11-25 18:23",
            "mcontent": "生产消费队列。队长类持有队员类的指针向量。队员持有队长指针。需要的时候往对方的消息队列塞东西就行"
        },
        {
            "mid": "61414352",
            "mtime": "2024-11-26 10:35",
            "mcontent": "你可以看看信令模式 你这个是典型的局域网信令模型消息格式可以定义一个字段用于存储发送者 接收者如果接收者为空 就表示是广播"
        },
        {
            "mid": "731907",
            "mtime": "2024-11-27 21:04",
            "mcontent": "Reply to +R by  [华它老] (2024-11-25 18:23)Reply to +R by  [hzm] (2024-11-25 16:31)好的，感谢大佬指点，那我再继续研究一下生产消费模型和信令"
        },
        {
            "mid": "66465497",
            "mtime": "2024-12-09 23:49",
            "mcontent": "qt里面信号槽，然后开线程，然后前面那个用来通讯，脱离qt不会"
        },
        {
            "mid": "731907",
            "mtime": "2024-12-14 00:17",
            "mcontent": "结个贴。使用这个库([https:://github.com/cameron314/concurrentqueue) 此网页不属于本网站，不保证其安全性  继续访问       取消 https://github.com/cameron314/concurrentqueue) https://github.com/cameron314/concurrentqueue)]。队长和队员各自建消息队列，互相分享队列。这样队长持有所有队员的消息队列，队员只持有队长的消息队列。消息队列的消息内容用自定义结构体。结构体可以包含发送者、指定接收者。最后各自开新线程运行消息循环就OK了。"
        }
    ]
}